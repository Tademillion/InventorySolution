{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/Projects/Another/InventorySystem/FrontEnd/lib/auth-context.tsx"],"sourcesContent":["\"use client\"\n\nimport { createContext, useContext, useState, useEffect, type ReactNode } from \"react\"\nimport type { User, UserRole } from \"./types\"\n\ninterface AuthContextType {\n  user: User | null\n  login: (email: string, password: string) => Promise<void>\n  logout: () => void\n  isLoading: boolean\n}\n\nconst AuthContext = createContext<AuthContextType | undefined>(undefined)\n\nconst MOCK_USERS: (User & { password: string })[] = [\n  {\n    id: \"1\",\n    email: \"admin@inventorypro.com\",\n    password: \"admin123\",\n    name: \"Admin User\",\n    role: \"admin\",\n    createdAt: new Date(\"2024-01-01\"),\n  },\n  {\n    id: \"2\",\n    email: \"cashier@inventorypro.com\",\n    password: \"cashier123\",\n    name: \"Cashier User\",\n    role: \"cashier\",\n    createdAt: new Date(\"2024-01-01\"),\n  },\n  {\n    id: \"3\",\n    email: \"auditor@inventorypro.com\",\n    password: \"auditor123\",\n    name: \"Auditor User\",\n    role: \"auditor\",\n    createdAt: new Date(\"2024-01-01\"),\n  },\n]\n\nexport function AuthProvider({ children }: { children: ReactNode }) {\n  const [user, setUser] = useState<User | null>(null)\n  const [isLoading, setIsLoading] = useState(true)\n\n  useEffect(() => {\n    const storedUser = localStorage.getItem(\"inventory_user\")\n    if (storedUser) {\n      setUser(JSON.parse(storedUser))\n    }\n    setIsLoading(false)\n  }, [])\n\n  const login = async (email: string, password: string) => {\n    const mockUser = MOCK_USERS.find((u) => u.email === email && u.password === password)\n\n    if (!mockUser) {\n      throw new Error(\"Invalid credentials\")\n    }\n\n    const { password: _, ...userWithoutPassword } = mockUser\n    setUser(userWithoutPassword)\n    localStorage.setItem(\"inventory_user\", JSON.stringify(userWithoutPassword))\n  }\n\n  const logout = () => {\n    setUser(null)\n    localStorage.removeItem(\"inventory_user\")\n  }\n\n  return <AuthContext.Provider value={{ user, login, logout, isLoading }}>{children}</AuthContext.Provider>\n}\n\nexport function useAuth() {\n  const context = useContext(AuthContext)\n  if (context === undefined) {\n    throw new Error(\"useAuth must be used within an AuthProvider\")\n  }\n  return context\n}\n\nexport function useRequireAuth(allowedRoles?: UserRole[]) {\n  const { user, isLoading } = useAuth()\n\n  if (isLoading) {\n    return { user: null, isLoading: true, isAuthorized: false }\n  }\n\n  if (!user) {\n    return { user: null, isLoading: false, isAuthorized: false }\n  }\n\n  const isAuthorized = allowedRoles ? allowedRoles.includes(user.role) : true\n\n  return { user, isLoading: false, isAuthorized }\n}\n"],"names":[],"mappings":";;;;;;;;;AAEA;;;AAFA;;AAYA,MAAM,4BAAc,IAAA,8KAAa,EAA8B;AAE/D,MAAM,aAA8C;IAClD;QACE,IAAI;QACJ,OAAO;QACP,UAAU;QACV,MAAM;QACN,MAAM;QACN,WAAW,IAAI,KAAK;IACtB;IACA;QACE,IAAI;QACJ,OAAO;QACP,UAAU;QACV,MAAM;QACN,MAAM;QACN,WAAW,IAAI,KAAK;IACtB;IACA;QACE,IAAI;QACJ,OAAO;QACP,UAAU;QACV,MAAM;QACN,MAAM;QACN,WAAW,IAAI,KAAK;IACtB;CACD;AAEM,SAAS,aAAa,EAAE,QAAQ,EAA2B;;IAChE,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,yKAAQ,EAAc;IAC9C,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAC;IAE3C,IAAA,0KAAS;kCAAC;YACR,MAAM,aAAa,aAAa,OAAO,CAAC;YACxC,IAAI,YAAY;gBACd,QAAQ,KAAK,KAAK,CAAC;YACrB;YACA,aAAa;QACf;iCAAG,EAAE;IAEL,MAAM,QAAQ,OAAO,OAAe;QAClC,MAAM,WAAW,WAAW,IAAI,CAAC,CAAC,IAAM,EAAE,KAAK,KAAK,SAAS,EAAE,QAAQ,KAAK;QAE5E,IAAI,CAAC,UAAU;YACb,MAAM,IAAI,MAAM;QAClB;QAEA,MAAM,EAAE,UAAU,CAAC,EAAE,GAAG,qBAAqB,GAAG;QAChD,QAAQ;QACR,aAAa,OAAO,CAAC,kBAAkB,KAAK,SAAS,CAAC;IACxD;IAEA,MAAM,SAAS;QACb,QAAQ;QACR,aAAa,UAAU,CAAC;IAC1B;IAEA,qBAAO,6LAAC,YAAY,QAAQ;QAAC,OAAO;YAAE;YAAM;YAAO;YAAQ;QAAU;kBAAI;;;;;;AAC3E;GA9BgB;KAAA;AAgCT,SAAS;;IACd,MAAM,UAAU,IAAA,2KAAU,EAAC;IAC3B,IAAI,YAAY,WAAW;QACzB,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT;IANgB;AAQT,SAAS,eAAe,YAAyB;;IACtD,MAAM,EAAE,IAAI,EAAE,SAAS,EAAE,GAAG;IAE5B,IAAI,WAAW;QACb,OAAO;YAAE,MAAM;YAAM,WAAW;YAAM,cAAc;QAAM;IAC5D;IAEA,IAAI,CAAC,MAAM;QACT,OAAO;YAAE,MAAM;YAAM,WAAW;YAAO,cAAc;QAAM;IAC7D;IAEA,MAAM,eAAe,eAAe,aAAa,QAAQ,CAAC,KAAK,IAAI,IAAI;IAEvE,OAAO;QAAE;QAAM,WAAW;QAAO;IAAa;AAChD;IAdgB;;QACc"}}]
}